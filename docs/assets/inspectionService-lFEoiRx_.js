import{I as c}from"./main-CFFFykfE.js";import{d as a}from"./db-BoHkaBle.js";async function u(){const e=await a.inspections.reverse().toArray();return await Promise.all(e.map(async o=>{const s=await a.averages.where("inspection_id").equals(o.inspection_id).toArray(),n=s.length,r=s.reduce((d,i)=>d+(i.num_frames||0),0);return new c(o.inspection_id,o.hive_name,o.inspection_date,o.start_time,n,r,o.notes.length>0)}))}async function g(e){const t=await a.inspections.get(e);if(!t)throw new Error("404 - Inspection not found");return t}async function m(e){const{inspection_id:t,...o}=e,s={...o,brood_eggs:e.brood_eggs?1:0,brood_larva:e.brood_larva?1:0,brood_capped:e.brood_capped?1:0,queen_spotted:e.queen_spotted?1:0};return{message:"Created successfully",inspection_id:(await a.inspections.add(s)).toString()}}async function l(e){if(!e.inspection_id)throw new Error("Missing Inspection ID");const t={...e};return t.brood_eggs=e.brood_eggs?1:0,t.brood_larva=e.brood_larva?1:0,t.brood_capped=e.brood_capped?1:0,t.queen_spotted=e.queen_spotted?1:0,await a.inspections.put(t),e}export{g as a,m as c,u as g,l as u};
