import{i as g,m as s,j as w,a as u,d as c,r as f,u as H,n as h,o as k,v as C}from"./main-Ca-RDbF7.js";/* empty css               *//* empty css              */import{g as y,a as E}from"./hiveService-C0nXD36h.js";import"./db-1doVCpW2.js";const _=document.getElementById("loading"),l=document.querySelector("main");async function L(n){try{let e={hive_name:"",num_boxes:0,active:0};const a=n.get("hive-name-input");if(a===null||a.toString().trim()===""){c("Please enter a name for the new hive","add-hive-message","error");return}else e.hive_name=a.toString();const d=n.get("status-checkbox")!==null;d&&(e.active=d?1:0);const t=await E(e);e.hive_id=parseInt(t.hive_id);const o=C(e,["hive_name","num_boxes","active"],e.hive_id.toString()),i=document.getElementById("hives-table");i?(i.querySelector("tbody").appendChild(o),c(t.message,"main-message","check_circle"),o.addEventListener("click",()=>window.location.href=`/hives/manage?hiveId=${o.id}`)):window.location.reload()}catch(e){c(e,"main-message","error")}h("add-hive-backdrop")}async function x(){const n=document.getElementById("add-hive-backdrop"),e=document.getElementById("add-hive-modal");e.innerHTML="";const a=s("h2",null,null,"Enter the details for the new hive");e.appendChild(a);const d=f("text","hive-name-input","Hive Name:","form-row");e.appendChild(d);const t=s("section",null,"form-row",null),r=s("p",null,null,"status:");t.appendChild(r);const o=H("Active","Not Active","status-checkbox",!1,!1);t.appendChild(o),e.appendChild(t);const i=s("section",null,"button-group-row",null),m=u("Close","button","close-button","button red");m.addEventListener("click",()=>h("add-hive-backdrop")),i.appendChild(m);const v=u("Submit","submit","submit-button","button green");i.appendChild(v),e.appendChild(i),e.addEventListener("submit",p=>{p.preventDefault();const b=new FormData(e);L(b)}),k(n,e,"hive-name-input")}g("Manage Hives").then(async()=>{try{const n=await y(!1);if(n.length>0){const a=s("h2",null,null,"Selecte a hive to manage:");l.appendChild(a);const t=w(n,["hive_name","num_boxes","active"],"hive_id");t.setAttribute("id","hives-table"),t.classList.add("table-clickable"),t.querySelectorAll("tr").forEach(o=>{o.addEventListener("click",()=>{window.location.href=`/hives/manage?hiveId=${o.id}`})}),l.appendChild(t)}else{const a=s("h2",null,null,"No hives to manage");l.appendChild(a)}const e=u("Add Hive","button","open-add-modal","button blue","add");e.addEventListener("click",()=>{x()}),l.appendChild(e),_.remove(),l.classList.remove("hide")}catch(n){c(n,"main-message","error")}});
