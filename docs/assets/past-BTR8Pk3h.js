import{i as m,n as p,s as f,b as h,h as b,c as g}from"./main-BjQPQWDg.js";/* empty css               */import{g as y}from"./inspectionService-A3-19NT0.js";import"./db-Cx3PrDYs.js";const a=document.querySelector("main"),d=document.getElementById("loading"),L=document.getElementById("back-button");let n=null,r=[];m("Past Inspections").then(async()=>{try{L.addEventListener("click",()=>p("/"));const e=new URLSearchParams(window.location.search).get("year");n=await y(),n&&f(n),I(),c(e||r[r.length-1]),d.classList.add("hide")}catch(t){d.classList.add("hide"),h(t,"main-message","error")}a.classList.remove("hide")});function u(t){return t.split("-")[0]}function I(){n&&(r=n.reduce((e,i)=>{const s=u(i.inspection_date);return e.includes(s)||e.push(s),e},[]).reverse())}function w(t){const e=r.reduce((i,s)=>{const o=g(s,"button",s,"button white");return t===s&&(o.classList.remove("white"),o.classList.add("blue")),o.addEventListener("click",()=>{c(s)}),i.appendChild(o),i},document.createElement("section"));e.setAttribute("class","button-group-row"),e.setAttribute("id","year-selector"),a.appendChild(e)}function _(t){if(n)return n.filter(e=>u(e.inspection_date)===t)}function c(t){a.innerHTML="",w(t);const e=_(t),i=["inspection_date","hive_name","start_time","num_boxes","total_frames","has_notes"];if(e){const s=b(e,i,"inspection_id");s.classList.add("table-clickable"),s.querySelectorAll("tr").forEach(l=>l.addEventListener("click",()=>p("/past/inspectionDetail",{params:{sentFrom:"past",year:t,inspectionId:l.id}}))),a.appendChild(s)}}
