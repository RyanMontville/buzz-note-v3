import{i as w,n as u,m as s,j as k,c as h,b as c,v as H,x as f,p as v,q as y,y as C}from"./main-D1Jcmwfi.js";/* empty css               *//* empty css              */import{g as E,a as _}from"./hiveService-DvPXRA0L.js";const B=document.getElementById("loading"),l=document.querySelector("main"),L=document.getElementById("back-button");w("Manage Hives").then(async()=>{try{L.addEventListener("click",()=>u("/"));const n=await E(!1);if(n.length>0){const a=s("h2",null,null,"Selecte a hive to manage:");l.appendChild(a);const t=k(n,["hive_name","num_boxes","active"],"hive_id");t.setAttribute("id","hives-table"),t.classList.add("table-clickable"),t.querySelectorAll("tr").forEach(o=>{o.addEventListener("click",()=>u("/hives/manage",{params:{hiveId:o.id}}))}),l.appendChild(t)}else{const a=s("h2",null,null,"No hives to manage");l.appendChild(a)}const e=h("Add Hive","button","open-add-modal","button blue","add");e.addEventListener("click",()=>{I()}),l.appendChild(e),B.remove(),l.classList.remove("hide")}catch(n){c(n,"main-message","error")}});async function x(n){try{let e={hive_name:"",num_boxes:0,active:0};const a=n.get("hive-name-input");if(a===null||a.toString().trim()===""){c("Please enter a name for the new hive","add-hive-message","error");return}else e.hive_name=a.toString();const d=n.get("status-checkbox")!==null;d&&(e.active=d?1:0);const t=await _(e);e.hive_id=parseInt(t.hive_id);const o=C(e,["hive_name","num_boxes","active"],e.hive_id.toString()),i=document.getElementById("hives-table");i?(i.querySelector("tbody").appendChild(o),c(t.message,"main-message","check_circle"),o.addEventListener("click",()=>u("/hives/manage",{params:{hiveId:o.id}}))):window.location.reload()}catch(e){c(e,"main-message","error")}v("add-hive-backdrop")}async function I(){const n=document.getElementById("add-hive-backdrop"),e=document.getElementById("add-hive-modal");e.innerHTML="";const a=s("h2",null,null,"Enter the details for the new hive");e.appendChild(a);const d=H("text","hive-name-input","Hive Name:","form-row");e.appendChild(d);const t=s("section",null,"form-row",null),r=s("p",null,null,"status:");t.appendChild(r);const o=f("Active","Not Active","status-checkbox",!1,!1);t.appendChild(o),e.appendChild(t);const i=s("section",null,"button-group-row",null),m=h("Close","button","close-button","button red");m.addEventListener("click",()=>v("add-hive-backdrop")),i.appendChild(m);const p=h("Submit","submit","submit-button","button green");i.appendChild(p),e.appendChild(i),e.addEventListener("submit",b=>{b.preventDefault();const g=new FormData(e);x(g)}),y(n,e,"hive-name-input")}
